<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>LeaderBoard</title>
    <script src="cookies.js"></script>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="stylesheet.css">
</head>
<body>


<div class="leaderboard">
<h1> Your Score:</h1>
<div id="score_container"> </div>


<h1> Leader Board:</h1>
<div id="leaderBoard_container"></div>
</div>
<script>

    const session=getCookie("sessionId");
    console.log(session);

//player's score
function showPlayerScore()
{
    fetch(`https://codecyprus.org/th/api/score?session=${session}`)
        .then(response => response.json())
        .then(jsonObject => {
            console.log(jsonObject);

            let score=document.getElementById('score_container');
            score.innerHTML=jsonObject.score;


        });
}

showPlayerScore();


function showLeaderBoard()
{
    fetch(`https://codecyprus.org/th/api/leaderboard?session=${session}&sorted&limit=10`)
        .then(response => response.json())
        .then(jsonObject => {
            console.log(jsonObject);

     let leaderBoardArray= jsonObject.leaderboard;
     let showPosition=document.getElementById("leaderBoard_container");
     showPosition.innerHTML="";
     for (let i=0; leaderBoardArray.length; i++)
             {
                 let position=document.createElement("p");
                 position.innerHTML=leaderBoardArray[i].player+" ->  "+leaderBoardArray[i].score;
                 showPosition.appendChild(position);

             }
        });
}

showLeaderBoard();

</script>

<br><br>
<h1>Thank you for playing our game!</h1>

<footer id="footer">
    <div id="FollowUs ">
        <p>Follow us on:</p>

        <a href="https://www.instagram.com/web.busters5/" target="_blank">
            <button class ="socialBtn">Instagram</button>
        </a>

        <a href="https://www.instagram.com/web.busters5/" target="_blank">
            <button class ="socialBtn">TikTok</button>
        </a>

        <a href="https://x.com/Web_Busters5" target="_blank">
            <button class ="socialBtn">Twitter</button>
        </a>
    </div>
</footer>
</body>
</html>